var R=Object.defineProperty;var j=(r,e,t)=>e in r?R(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var C=(r,e,t)=>(j(r,typeof e!="symbol"?e+"":e,t),t);import{s as q,l as O,c as w,j as G,t as Y}from"./vendor.77f03656.js";const z=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}};z();class K{constructor(){C(this,"toastTimeout",0)}newError(e){const t=e.id,n=e.message;let o=document.getElementById(t);o||(o=document.getElementById("page-allnotes")||document.createElement("div")),o.innerHTML="";const s=document.createElement("div"),a=document.createElement("span"),i=document.createElement("h3"),l=document.createTextNode(n),c=document.createElement("button");c.innerText=e.buttonCaption,c.addEventListener("click",e.buttonAction),a.className="material-icons big-x2",a.innerText=e.materialIcon,s.className="centered-absolute",i.append(l),s.append(a,i,c),o.append(s)}toast(e){clearTimeout(this.toastTimeout),this.hideToast(),setTimeout(()=>{const t=e.title,n=e.text,o=e.delay||0,s=document.getElementById("toast-div")||document.createElement("div"),a=document.getElementById("toast-title")||document.createElement("div"),i=document.getElementById("toast-content")||document.createElement("div");s.classList.remove("hidden"),a.innerText=t,i.innerText=n,o&&(this.toastTimeout=setTimeout(this.hideToast,o))},250)}init(){const e=document.createElement("div"),t=document.createElement("h3"),n=document.createElement("p");e.className="toast hidden",e.id="toast-div",t.innerText="{{title}}",t.className="nomargin",t.id="toast-title",n.innerText="{{content}}",n.className="nomargin",n.id="toast-content",e.append(t,n),document.body.append(e)}hideToast(){(document.getElementById("toast-div")||document.createElement("div")).classList.add("hidden")}}const u=new K;var x;(function(r){r[r.darkmode=0]="darkmode",r[r.lightmode=1]="lightmode"})(x||(x={}));const I=new Map([["default",{name:"One Dark Pro",author:"Atom",colors:{red:"#e06c75",green:"#98c379",yellow:"#e5c07b",blue:"#61afef",purple:"#c678dd",aqua:"#56b6c2",orange:"#c48e49",gray:"#51565f",fg:"#abb2bf",bg:"#232936"},userSelectable:!0,default:!0,scheme:0}],["gruvboxdark",{name:"Gruvbox Dark",author:"GitHub/morhetz",colors:{red:"#cc241d",green:"#98971a",yellow:"#d79921",blue:"#458588",purple:"#b16286",aqua:"#689d6a",orange:"#d65d0e",gray:"#504945",fg:"#ebdbb2",bg:"#282828"},userSelectable:!0,scheme:0}],["nord",{name:"Nord",author:"Arctic Ice Studios",colors:{red:"#bf616a",green:"#a3be8b",yellow:"#ebcb8b",blue:"#5e81ac",purple:"#b48ead",aqua:"#8fbcbb",orange:"#d0a770",gray:"rgb(109,109,109)",fg:"rgb(216,222,233)",bg:"rgb(46,52,64)"},userSelectable:!0,scheme:0}],["deepocean",{name:"Deep Ocean",author:"Material Theme",colors:{red:"#f07178",green:"#c3e88d",yellow:"#ffcb6b",blue:"#82aaff",purple:"#c792ea",aqua:"#89ddff",orange:"#f78c6c",gray:"#546e7a",fg:"#B0BEC5",bg:"#263238"},userSelectable:!0,scheme:0}],["dracula",{name:"Dracula",author:"Zeno Rocha",colors:{red:"#ff5555",green:"#50FA7B",yellow:"#F1FA8C",blue:"#BD93F9",purple:"#BD93F9",aqua:"#8BE9FD",orange:"#FFB86C",gray:"#555",fg:"#A4A4A1",bg:"#282A36"},userSelectable:!0,scheme:0}],["nightowl",{name:"Night Owl",author:"GitHub/sdras",colors:{red:"#EF5350",green:"#22da6e",yellow:"#c5e478",blue:"#82AAFF",purple:"#C792EA",aqua:"#21c7a8",orange:"#FFB458",gray:"#637777",fg:"#d6deeb",bg:"#011627"},userSelectable:!0,scheme:0}],["monokaipro",{name:"Monokai Extended",author:"SuperPaintman",colors:{red:"#F92672",green:"#A6E22E",yellow:"#E6DB74",blue:"#66D9EF",purple:"#AE81FF",aqua:"#21c7a8",orange:"#FFB458",gray:"#75715E",fg:"#F8F8F2",bg:"#272822"},userSelectable:!0,scheme:0}],["palenight",{name:"Pale Night",author:"Olaolu Olawuyi",colors:{red:"#ff5572",green:"#a9c77d",yellow:"#FFCB6B",blue:"#82AAFF",purple:"#C792EA",aqua:"#89DDFF",orange:"#FFB42A",gray:"#697098",fg:"#BFC7D5",bg:"#292D3E"},userSelectable:!0,scheme:0}],["atomonedark",{name:"Atom One Dark",author:"Atom",colors:{red:"#E06C75",green:"#98C379",yellow:"#E5C07B",blue:"#61AFEF",purple:"#C678DD",aqua:"#56B6C2",orange:"#c48e49",gray:"#51565f",fg:"#ABB2BF",bg:"#282C34"},userSelectable:!0,scheme:0}],["gruvboxlight",{name:"Gruvbox Light",author:"GitHub/morhetz",colors:{red:"#cc241d",green:"#98971a",yellow:"#d79921",blue:"#458588",purple:"#b16286",aqua:"#689d6a",orange:"#d65d0e",gray:"#bdae93",fg:"#3c3836",bg:"#fbf1c7"},userSelectable:!0,scheme:1}],["onelightpro",{name:"One Light Pro",author:"Atom",colors:{red:"#e06c75",green:"#98c379",yellow:"#e5c07b",blue:"#61afef",purple:"#c678dd",aqua:"#56b6c2",orange:"#c48e49",gray:"#51565f",fg:"#232936",bg:"#dee5ef"},userSelectable:!0,default:!0,scheme:1}]]);class V{refreshAll(e){var i,l,c;const t=B.getThemes(),n=document.querySelectorAll("div#page-themeselector #darkmode")[0],o=document.querySelectorAll("div#page-themeselector #lightmode")[0];e&&(n.innerHTML="",o.innerHTML="");let s=0,a=0;for(let d=0;d<t.length;d++){const h=document.createElement("div"),f=document.createElement("h3"),k=document.createTextNode((i=t[d][1])==null?void 0:i.name),N=document.createElement("p"),L=document.createTextNode(`By ${(l=t[d][1])==null?void 0:l.author}`),S=document.createElement("button"),M=document.createElement("div"),H=document.createElement("span");localStorage.getItem("theme")&&localStorage.getItem("theme")==t[d][0]&&(H.className="material-icons green",H.innerText="check",h.append(H)),S.className="apply",S.innerText=localStorage.getItem("theme")==t[d][0]?"Applied":"Apply",S.addEventListener("click",()=>{B.applyTheme(t[d][0],!0)}),localStorage.getItem("theme")==t[d][0]&&S.setAttribute("disabled","true"),M.className="color-preview";const $=(c=I.get(t[d][0]))==null?void 0:c.colors;for(const J in $){const D=document.createElement("div");D.className="segment",D.style.background=$[J],M.append(D)}h.className="theme",f.className="header",f.append(k),N.className="author",N.append(L),h.append(f,N,S,M),t[d][1].userSelectable==!0&&(x[t[d][1].scheme]=="darkmode"?(s++,n.append(h),s==3&&(s=0,n.append(document.createElement("br")))):x[t[d][1].scheme]=="lightmode"&&(a++,o.append(h),a==3&&(a=0,o.append(document.createElement("br")))))}}}const _=new V;class W{constructor(){C(this,"loadedTheme","")}applyTheme(e,t){var n;if(I.has(e)){const o="body *, body { ",s=this.getBottomStyleSheet();for(let d=0;d<s.cssRules.length;d++)s.cssRules[d].cssText.startsWith(o+"--")&&this.getBottomStyleSheet().deleteRule(d);const a=I.get(e),i=a==null?void 0:a.colors;let l="";for(const d in i)l+=`--${d}: ${i[d]}; `;((n=I.get(e))==null?void 0:n.scheme)==x.lightmode&&(l+="--topbar-bg: #0002; --sidebar-bg: #00000011; --input-bg: #00000006");let c=`${o}${l.trimEnd()} }`;this.getBottomStyleSheet().insertRule(c,0),t&&localStorage.setItem("theme",e),_.refreshAll(!0)}else{const o={title:"Unable to load theme",text:`Failed to load theme "${e}": it does not exist.

The default theme has been loaded.`,delay:3e3};u.toast(o),this.applyTheme("default",!0)}}getThemes(){let e=[];for(let t of I)e.push(t);return e}init(){document.body.append(document.createElement("style"));let e=localStorage.getItem("theme");this.applyTheme(e,!1)}getBottomStyleSheet(){return document.styleSheets[document.styleSheets.length-1]}}const B=new W;class Z{registerColorClasses(){for(let e in m){const t=m[e],n=`body .${t} { color: var(--${t}); }`;try{B.getBottomStyleSheet().insertRule(n,B.getBottomStyleSheet().cssRules.length)}catch{}}}}var m;(function(r){r[r.red=0]="red",r[r.green=1]="green",r[r.yellow=2]="yellow",r[r.blue=3]="blue",r[r.purple=4]="purple",r[r.aqua=5]="aqua",r[r.gray=6]="gray",r[r.orange=7]="orange"})(m||(m={}));const Q=new Z,b=new Map([["home",{dispName:"Home",materialIcon:"home",onSidebar:!0,color:m.blue,default:!0,addBreak:!0,onHome:!1,inTopBar:!0}],["allnotes",{dispName:"Notes",materialIcon:"description",onSidebar:!0,color:m.purple,hasCountableContent:!0,onHome:!0}],["pinned",{dispName:"Pinned Notes",materialIcon:"bookmark",onSidebar:!0,color:m.green,addBreak:!0,hasCountableContent:!0,onHome:!0}],["task",{dispName:"Tasks",materialIcon:"insert_drive_file",onSidebar:!0,color:m.yellow,hasCountableContent:!0,onHome:!0}],["unftasks",{dispName:"Unfinished Tasks",materialIcon:"file_open",onSidebar:!0,color:m.orange,hasCountableContent:!0,onHome:!0}],["fintasks",{dispName:"Finished Tasks",materialIcon:"task",onSidebar:!0,color:m.green,hasCountableContent:!0,addBreak:!0,onHome:!0}],["themeselector",{dispName:"Themes",materialIcon:"palette",onSidebar:!0,color:m.purple,onHome:!0,inTopBar:!0}],["error",{dispName:"Error",materialIcon:"error",onSidebar:!1,color:m.red}],["trash",{dispName:"Trash",materialIcon:"delete",onSidebar:!0,color:m.red,inTopBar:!0}]]);class X{switch(e,t){var i;const n=document.getElementById(`page-${e}`),o=document.querySelectorAll("#pages>button");for(let l=0;l<o.length;l++)if(o[l].className="option page",o[l].classList.add(o[l]==t?"selected":"unselected"),o[l]==t)o[l].children[0].classList.add(m[b.get(e).color]);else for(const c in m)o[l].children[0].classList.remove(m[c]);let s=`Page Not Found: ${b.get(e).dispName||"Unknown Page"}`,a="var(--red)";if(n&&b.has(e)){const l=document.querySelectorAll("div.page");for(let c=0;c<l.length;c++){if(l[c]!=n){l[c].classList.add("hidden");continue}l[c].classList.remove("hidden")}a=`var(--${m[(i=b.get(e))==null?void 0:i.color]})`,s=b.get(e).dispName,document.title=`vTDx - ${b.get(e).dispName}`}else{this.switch("error");const l={message:"Sorry, that page doesn't seem to exist.",materialIcon:"web_asset_off",buttonCaption:"Go Home",buttonAction:()=>{this.switch("home",document.getElementById("button-page-home"))},id:"page-error"};u.newError(l),document.getElementById("page-dot").style.color=a,document.getElementById("page-disp").innerText=s,document.title="vTDx - Page Not Found"}document.getElementById("page-dot").style.color=a,document.getElementById("page-disp").innerText=s}}const E=new X;class ee{toHTML(e){return new q.Converter().makeHtml(e)}toMD(e){return new q.Converter().makeMarkdown(e)}}const v=new ee;class te{countFinished(){var n,o;let e=0;const t=this.getTasks();for(let s=0;s<t.length;s++)((n=t[s])==null?void 0:n.finished)&&!((o=t[s])==null?void 0:o.deleted)&&e++;return e}countUnfinished(){const e=this.countFinished();return this.countTasks()-e}countTasks(){var n;let e=0;const t=this.getTasks();for(let o=0;o<t.length;o++)((n=t[o])==null?void 0:n.deleted)||e++;return e}populateTaskPage(e,t){var n;if(t||(t=document.getElementById("page-task")||document.createElement("div")),t){e&&(t.innerHTML="");const o=this.getTasks();let s=0;for(let a=0;a<o.length;a++)((n=o[a])==null?void 0:n.deleted)||(this.displayTask(a,t),s++);if(!s){const a={materialIcon:"broken_image",message:"You have no Tasks",id:"page-task",buttonCaption:"Create a task",buttonAction:()=>{const i={windowTitle:"Create new Task",nodeTitle:"Content",hideTitleField:!1,hideContentField:!0,buttonText:"Create task",buttonAction:l=>{this.createTask(l),this.refreshAll()},clearFields:!0};T.show(i)}};u.newError(a)}}}populateUnFinishedTasksPage(e,t){var n;if(t||(t=document.getElementById("page-unftasks")||document.createElement("div")),t){e&&(t.innerHTML="");const o=this.getTasks();let s=0;for(let a=0;a<o.length;a++)!o[a].finished&&!((n=o[a])==null?void 0:n.deleted)&&(this.displayTask(a,t),s++);if(!s){const a={materialIcon:o.length?"check":"broken_image",message:o.length?"All your Tasks are finished!":"You don't have any Tasks!",id:"page-unftasks",buttonCaption:"Goto your Tasks",buttonAction:()=>{E.switch("task",document.getElementById("button-page-task")||document.createElement("div"))}};u.newError(a)}}}populateFinishedTasksPage(e,t){var n;if(t||(t=document.getElementById("page-fintasks")||document.createElement("div")),t){e&&(t.innerHTML="");const o=this.getTasks();let s=0;for(let a=0;a<o.length;a++)o[a].finished&&!((n=o[a])==null?void 0:n.deleted)&&(this.displayTask(a,t),s++);if(!s){const a={materialIcon:o.length?"error_outline":"broken_image",message:o.length?"You haven't completed any of your Tasks!":"You don't have any Tasks!",id:"page-fintasks",buttonCaption:"Goto your Tasks",buttonAction:()=>{E.switch("task",document.getElementById("button-page-task")||document.createElement("div"))}};u.newError(a)}}}createTask(e){const t=this.getTasks(),n={text:e,finished:!1,deleted:!1};t.push(n),localStorage.setItem("taskstore",JSON.stringify(t)),u.toast({title:"",text:"Task Created!",delay:3e3})}displayTask(e,t){var o;const n=this.getTasks();if(e<=n.length){t||(t=document.getElementById("page-task")||document.createElement("div"));const s=document.createElement("div"),a=document.createElement("p"),i=document.createElement("button"),l=document.createElement("span"),c=document.createElement("button"),d=document.createElement("span"),h=document.createElement("button"),f=document.createElement("span");a.className="header",i.className="delete",i.title="Delete task",i.addEventListener("click",()=>{this.deleteTask(e),this.refreshAll()}),c.className="finish",c.title=`${n[e].finished?"Mark not done":"Mark done"}`,c.addEventListener("click",()=>{this.toggletaskFinished(e),this.refreshAll()}),a.addEventListener("click",()=>{this.toggletaskFinished(e),this.refreshAll()}),h.className="edit",h.title="Edit task",h.addEventListener("click",()=>{this.editTask(e),this.refreshAll()}),d.className="material-icons",d.innerText=`${n[e].finished?"check_box":"check_box_outline_blank"}`,l.className="material-icons",l.innerText="delete",f.className="material-icons",f.innerText="edit",a.innerHTML=v.toHTML((o=n[e])==null?void 0:o.text),i.append(l),c.append(d),h.append(f),s.className="task",s.append(a,c,i,h),t.append(s)}}getTasks(){return JSON.parse(localStorage.getItem("taskstore"))||[]}deleteTask(e){const t=this.getTasks();e<=t.length&&(A.moveTaskToTrash(e),u.toast({text:`Task #${e+1} moved to trash.`,title:"",delay:3e3}))}refreshAll(){this.populateTaskPage(!0),this.populateUnFinishedTasksPage(!0),this.populateFinishedTasksPage(!0);const e=document.querySelector("button#button-page-task span.counter")||document.createElement("div"),t=document.querySelector("button#button-page-fintasks span.counter")||document.createElement("div"),n=document.querySelector("button#button-page-unftasks span.counter")||document.createElement("div");e.innerText=`${this.countTasks()}`,t.innerText=`${this.countFinished()}`,n.innerText=`${this.countUnfinished()}`}toggletaskFinished(e){var n;const t=this.getTasks();e<=t.length&&(((n=t[e])==null?void 0:n.finished)?this.markUnfinished(e):this.markFinished(e))}markUnfinished(e){const t=this.getTasks();e<=t.length&&(t[e].finished=!1,u.toast({text:`Marked task #${e+1} as unfinished.`,title:"",delay:3e3})),localStorage.setItem("taskstore",JSON.stringify(t))}markFinished(e){const t=this.getTasks();e<=t.length&&(t[e].finished=!0,u.toast({text:`Marked task #${e+1} as finished.`,title:"",delay:3e3})),localStorage.setItem("taskstore",JSON.stringify(t))}completeAll(){const e=this.getTasks();for(let t=0;t<e.length;t++)e[t].finished=!0;u.toast({text:"Marked all Tasks as finished.",title:"",delay:3e3}),localStorage.setItem("taskstore",JSON.stringify(e)),this.refreshAll()}editTask(e){var o;const t=this.getTasks(),n={windowTitle:"Edit Task",nodeTitle:"Content",hideTitleField:!1,hideContentField:!0,buttonText:"edit Task",titleFieldText:(o=t[e])==null?void 0:o.text,buttonAction:s=>{var i,l;const a={text:s,finished:(i=t[e])==null?void 0:i.finished,deleted:(l=t[e])==null?void 0:l.deleted};t[e]=a,localStorage.setItem("taskstore",JSON.stringify(t)),g.refreshAll(),u.toast({text:`Task #${e+1} saved.`,title:"",delay:3e3})},clearFields:!1};T.show(n)}}const g=new te;class ne{moveTaskToTrash(e){const t=g.getTasks();e<=t.length&&(t[e].deleted=!0,localStorage.setItem("taskstore",JSON.stringify(t))),this.populateTrashPage()}moveNoteToTrash(e){const t=p.getNotes();e<=t.length&&(t[e].deleted=!0,localStorage.setItem("notestore",JSON.stringify(t))),this.populateTrashPage()}restoreNoteFromTrash(e){const t=p.getNotes();e<=t.length&&(t[e].deleted=!1,localStorage.setItem("notestore",JSON.stringify(t))),this.populateTrashPage(),p.refreshAll()}restoreTaskFromTrash(e){const t=g.getTasks();e<=t.length&&(t[e].deleted=!1,console.log(t[e]),localStorage.setItem("taskstore",JSON.stringify(t))),this.populateTrashPage(),p.refreshAll()}populateTrashPage(){const e=document.getElementById("page-trash"),t=g.getTasks(),n=p.getNotes(),o=document.createElement("h2"),s=document.createElement("h2"),a=document.createElement("p"),i=document.createElement("p");let l=0,c=0;e.innerText="",o.innerText="Deleted Notes",s.innerText="Deleted Tasks",a.innerText="There are no deleted Notes.",i.innerText="There are no deleted Tasks.",e.append(s);for(let d=0;d<t.length;d++)t[d].deleted&&(this.displayTrashTask(d,e),s.style.display="",l++);l<=0?s.style.display="none":s.style.display="",e.append(o);for(let d=0;d<n.length;d++)n[d].deleted&&(this.displayTrashNote(d,e),c++);if(c<=0?o.style.display="none":o.style.display="",!c&&!l){const d={materialIcon:"delete_sweep",message:"Trash is empty",id:"page-trash",buttonCaption:"Go Home",buttonAction:()=>{E.switch("home")}};u.newError(d)}console.log(c,l),console.log(c)}displayTrashNote(e,t){t||(t=document.getElementById("page-trash")||document.createElement("div"));const n=p.getNotes(),o=document.createElement("div"),s=document.createElement("h3"),a=document.createElement("p"),i=document.createElement("button"),l=document.createElement("span"),c=document.createElement("button"),d=document.createElement("span");s.className="header",a.className="content",i.className="delete",i.title="Restore Note",i.addEventListener("click",()=>{this.restoreNoteFromTrash(e),p.refreshAll()}),l.className="material-icons",l.innerText="restore_from_trash",c.className="pin unpin",c.title="Delete Note Forever",c.addEventListener("click",()=>{this.deleteNoteForever(e),p.refreshAll()}),d.className="material-icons",d.innerText="delete_forever",c.append(d),s.innerHTML=v.toHTML(n[e].title),a.innerHTML=v.toHTML(n[e].content),i.append(l),o.className="note",o.append(s,a,i,c),t.append(o),document.querySelectorAll("code.ts.language-ts").forEach(h=>{O.highlightElement(h)})}displayTrashTask(e,t){t||(t=document.getElementById("page-trash")||document.createElement("div"));const n=g.getTasks(),o=document.createElement("div"),s=document.createElement("h3"),a=document.createElement("button"),i=document.createElement("span"),l=document.createElement("button"),c=document.createElement("span");s.className="header",a.className="delete",a.title="Restore Task",a.addEventListener("click",()=>{this.restoreTaskFromTrash(e),g.refreshAll()}),i.className="material-icons",i.innerText="restore_from_trash",l.className="edit",l.title="Edit task",l.addEventListener("click",()=>{this.deleteTaskForever(e),g.refreshAll()}),c.className="material-icons",c.innerText="delete_forever",l.append(c),s.innerHTML=v.toHTML(n[e].text),a.append(i),o.className="task",o.append(s,a,l),t.append(o),document.querySelectorAll("code.ts.language-ts").forEach(d=>{O.highlightElement(d)})}init(){this.populateTrashPage()}deleteNoteForever(e){const t=p.getNotes();e<=t.length&&t.splice(e,1),localStorage.setItem("notestore",JSON.stringify(t)),this.populateTrashPage()}deleteTaskForever(e){const t=g.getTasks();e<=t.length&&t.splice(e,1),localStorage.setItem("taskstore",JSON.stringify(t)),this.populateTrashPage()}emptyTrash(){var n,o;const e=g.getTasks(),t=p.getNotes();for(let s=0;s<e.length;s++)((n=e[s])==null?void 0:n.deleted)&&this.deleteTaskForever(s);for(let s=0;s<t.length;s++)((o=t[s])==null?void 0:o.deleted)&&this.deleteNoteForever(s);if(this.populateTrashPage(),this.countDeletedNotes()+this.countDeletedTasks()>0)this.emptyTrash();else{const s={title:"",text:"Trash emptied.",delay:3e3};u.toast(s)}}countDeletedTasks(){let e=0;const t=g.getTasks();for(let n=0;n<t.length;n++)t[n].deleted&&e++;return e}countDeletedNotes(){let e=0;const t=p.getNotes();for(let n=0;n<t.length;n++)t[n].deleted&&e++;return e}}const A=new ne;class oe{countPinned(){let e=0;const t=this.getNotes();for(let n=0;n<t.length;n++)t[n].pinned&&!t[n].deleted&&e++;return e}countUnpinned(){return this.getNotes().length-this.countPinned()}countNotes(){let e=0;const t=this.getNotes();for(let n=0;n<t.length;n++)t[n].deleted||e++;return e}populateAllNotes(e,t){var s;t||(t=document.getElementById("page-allnotes")),e&&(t.innerHTML="");const n=this.getNotes();let o=0;for(let a=0;a<n.length;a++)((s=n[a])==null?void 0:s.deleted)||(this.displayNote(a,t),o++);if(!o){const a={materialIcon:"description",message:"You have no notes.",id:"page-allnotes",buttonCaption:"Create a note",buttonAction:()=>{const i={windowTitle:"Create new Note",nodeTitle:"Title",hideTitleField:!1,hideContentField:!1,buttonText:"Create note",buttonAction:(l,c)=>{p.createNote(l,c),p.refreshAll()},clearFields:!0};T.show(i)}};u.newError(a)}}populatePinnedNotes(e,t){t||(t=document.getElementById("page-pinned")),e&&(t.innerHTML="");const n=this.getNotes();let o=0;for(let s=0;s<n.length;s++)n[s].pinned&&!n[s].deleted&&(this.displayNote(s,t),o++);if(!o){const s={materialIcon:"bookmark",message:"You have no pinned notes.",id:"page-pinned",buttonCaption:"Goto your notes",buttonAction:()=>{E.switch("allnotes",document.getElementById("button-page-allnotes")||document.createElement("div"))}};u.newError(s)}}refreshAll(){this.populateAllNotes(!0),this.populatePinnedNotes(!0);const e=document.querySelector("button#button-page-allnotes span.counter")||document.createElement("div"),t=document.querySelector("button#button-page-pinned span.counter")||document.createElement("div");e.innerText=`${this.countNotes()}`,t.innerText=`${this.countPinned()}`,this.updatePageButtonTitles()}updatePageButtonTitles(){const e=document.querySelectorAll("button.option.page");for(let t=0;t<e.length;t++){const n=e==null?void 0:e[t],o=n.lastChild,s=n.children[1].innerText;o.className=="counter"&&(n.title=`${s} (${o.innerText})`)}}createNote(e,t){const n=this.getNotes(),o={title:e,content:t,pinned:!1,deleted:!1,priority:P.low};n.push(o),localStorage.setItem("notestore",JSON.stringify(n)),u.toast({text:"Note Created!",title:"",delay:3e3})}deleteNote(e){const t=this.getNotes();e<=t.length&&(A.moveNoteToTrash(e),u.toast({text:`Note #${e+1} moved to trash.`,title:"",delay:3e3}))}pinNote(e){const t=this.getNotes();e<=t.length&&(t[e].pinned=!0,u.toast({text:`Pinned Note #${e+1}.`,title:"",delay:3e3})),localStorage.setItem("notestore",JSON.stringify(t))}unPinNote(e){const t=this.getNotes();e<=t.length&&(t[e].pinned=!1,u.toast({text:`Unpinned Note #${e+1}.`,title:"",delay:3e3})),localStorage.setItem("notestore",JSON.stringify(t))}togglePinnedNote(e){const t=this.getNotes();e<=t.length&&(t[e].pinned?this.unPinNote(e):this.pinNote(e),this.refreshAll())}getNotes(){return JSON.parse(localStorage.getItem("notestore"))||[]}displayNote(e,t){t||(t=document.getElementById("page-allnotes"));const n=this.getNotes(),o=document.createElement("div"),s=document.createElement("h3"),a=document.createElement("p"),i=document.createElement("button"),l=document.createElement("span"),c=document.createElement("button"),d=document.createElement("span"),h=document.createElement("button"),f=document.createElement("span"),k=document.createElement("button"),N=document.createElement("span");s.className="header",a.className="content",i.className="delete",i.title="Delete Note",i.addEventListener("click",()=>{this.deleteNote(e),this.refreshAll()}),c.className=`pin${n[e].pinned?" unpin":""}`,c.title=`${n[e].pinned?"Unpin":"Pin"} this Note`,c.addEventListener("click",()=>{this.togglePinnedNote(e),this.refreshAll()}),h.className="edit",h.title="Edit this Note",h.addEventListener("click",()=>{this.editNote(e),this.refreshAll()}),k.className="expand",k.title=this.isCollapsed(e)?"Expand":"Collapse",k.addEventListener("click",()=>{this.toggleCollapsedNote(e)}),l.className="material-icons",l.innerText="delete",d.className="material-icons",d.innerText=`bookmark${n[e].pinned?"_remove":"_add"}`,f.className="material-icons",f.innerText="edit",N.className="material-icons",N.innerText=`expand_${this.isCollapsed(e)?"more":"less"}`,s.innerHTML=v.toHTML(n[e].title),a.innerHTML=v.toHTML(n[e].content),this.isCollapsed(e)&&a.classList.add("hidden"),i.append(l),c.append(d),h.append(f),k.append(N),o.className="note",o.append(s,a,i,c,h,k),t.append(o),document.querySelectorAll("code.ts.language-ts").forEach(L=>{w.highlightElement(L)})}editNote(e){var o,s;const t=this.getNotes(),n={windowTitle:"Edit Note",nodeTitle:"Title",hideTitleField:!1,hideContentField:!1,buttonText:"edit note",contentFieldText:(o=t[e])==null?void 0:o.content,titleFieldText:(s=t[e])==null?void 0:s.title,buttonAction:(a,i)=>{var c,d,h;const l={title:a,content:i,pinned:(c=t[e])==null?void 0:c.pinned,deleted:(d=t[e])==null?void 0:d.deleted,priority:(h=t[e])==null?void 0:h.priority};t[e]=l,localStorage.setItem("notestore",JSON.stringify(t)),p.refreshAll(),u.toast({text:`Note #${e+1} saved.`,title:"",delay:3e3})},clearFields:!1};T.show(n)}isCollapsed(e){var n;const t=this.getNotes();return!!(t[e]&&((n=t[e])==null?void 0:n.collapsed))}toggleCollapsedNote(e){this.isCollapsed(e)?this.expandNote(e):this.collapseNote(e)}expandNote(e){const t=this.getNotes();t[e]&&(t[e].collapsed=!1,localStorage.setItem("notestore",JSON.stringify(t)),u.toast({text:`Expanded Note #${e+1}.`,title:"",delay:3e3})),this.refreshAll()}collapseNote(e){const t=this.getNotes();t[e]&&(t[e].collapsed=!0,localStorage.setItem("notestore",JSON.stringify(t)),u.toast({text:`Collapsed Note #${e+1}.`,title:"",delay:3e3})),this.refreshAll()}}var P;(function(r){r[r.low=0]="low",r[r.high=1]="high"})(P||(P={}));const p=new oe;class se{constructor(){C(this,"initDone",!1)}init(){var h;const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("h3"),o=document.createElement("p"),s=document.createElement("p"),a=document.createElement("input"),i=document.createElement("textarea"),l=document.createElement("span"),c=document.createElement("button"),d=document.createElement("button");e.id="create-note-dialog",e.className="hidden",t.id="create-note-dialog-shade",t.className="hidden",n.innerText="Create new {{type}}",o.className="nomargin",o.innerText="Title",s.className="nomargin",s.innerText="Content",a.id="title-inp",a.className="fullwidth",i.className="fullwidth",i.id="content-inp",l.className="bottomright",d.id="cancel-button",c.id="create-button",d.innerText="Cancel",c.innerText="Create {{type}}",d.addEventListener("click",this.hide),l.append(d,c),e.append(n,o,a,s,i,l),(h=document.querySelector("div.content"))==null||h.append(t,e),this.initDone=!0}show(e){if(this.initDone){let t=function(d){l.removeEventListener("click",t),d.stopPropagation(),d.stopImmediatePropagation();const h=document.getElementById("title-inp").value||"",f=document.getElementById("content-inp").value||"";e.buttonAction(h,f),T.hide()};const n=document.querySelector("div#create-note-dialog input"),o=document.querySelector("div#create-note-dialog textarea"),s=document.getElementById("create-note-dialog-shade"),a=document.getElementById("create-note-dialog"),i=document.querySelector("div#create-note-dialog h3"),l=document.querySelector("div#create-note-dialog button#create-button"),c=document.querySelectorAll("div#create-note-dialog p.nomargin");e.clearFields?(n.value="",o.value=""):(n.value=e.titleFieldText||"",o.value=e.contentFieldText||""),i.innerText=e.windowTitle,l.innerText=e.buttonText,s.classList.remove("hidden"),a.classList.remove("hidden"),o.style.display=e.hideContentField?"none":"",n.style.display=e.hideTitleField?"none":"",c[1].style.display=e.hideContentField?"none":"",n.style.marginBottom=e.hideContentField?"50px":"",l.addEventListener("click",t),c[0].innerText=e.nodeTitle,c[1].innerText=e.nodeContent||""}}hide(){const e=document.getElementById("create-note-dialog-shade"),t=document.getElementById("create-note-dialog");e==null||e.classList.add("hidden"),t==null||t.classList.add("hidden")}processNote(){const e=document.querySelector("div#create-note-dialog input"),t=document.querySelector("div#create-note-dialog textarea");e.value&&t.value?(p.createNote(e.value,t.value),T.hide(),u.toast({text:"Note created!",title:"",delay:3e3})):u.toast({text:"title or content fields are not filled out.",title:"Unable to create note",delay:3e3}),p.refreshAll()}processtask(){const e=document.querySelector("div#create-note-dialog input");e.value?(g.createTask(e.value),T.hide()):u.toast({text:"Content field is not filled out.",title:"Unable to create task",delay:3e3}),g.refreshAll()}}const T=new se;class ae{populateHomeButtons(){const e=document.querySelectorAll("#page-home>div.centered-absolute");let t=0;for(const n of b)if(n[1].onHome&&!n[1].default){t++;const o=document.createElement("button"),s=document.createElement("span"),a=document.createElement("p"),i=document.createTextNode(n[1].dispName);s.className="material-icons big",s.innerText=n[1].materialIcon,a.className="nomargin",a.append(i),o.append(s,a),o.addEventListener("click",()=>{E.switch(n[0],document.getElementById(`button-page-${n[0]}`))}),o.addEventListener("mouseenter",()=>{s.style.color=`var(--${m[n[1].color]})`}),o.addEventListener("mouseleave",()=>{s.style.color=""}),e[0].append(o),t>=3&&(t=0,e[0].append(document.createElement("br")))}}}const le=new ae;class re{display(e){const t={windowTitle:e.title,nodeTitle:e.message,hideTitleField:!0,hideContentField:!0,buttonText:e.confirmButtonText,buttonAction:e.confirmButtonAction,clearFields:!0};T.show(t)}}const F=new re,ie=new Map([["newnote",{dispName:"New Note",materialIcon:"add_circle",action:()=>{const r={windowTitle:"Create new Note",nodeTitle:"Title",hideTitleField:!1,hideContentField:!1,buttonText:"Create note",buttonAction:(e,t)=>{p.createNote(e,t),p.refreshAll()},clearFields:!0};T.show(r)},color:m.purple,inTopBar:!0}],["clearall",{dispName:"Clear All Notes",materialIcon:"clear_all",action:()=>{const r={title:"Clear All Notes",message:"Are you sure you want to clear all notes? There is no going back!",confirmButtonAction:()=>{u.toast({title:"",text:"Cleared all notes",delay:3e3}),localStorage.removeItem("notestore"),p.refreshAll()},confirmButtonText:"Clear"};F.display(r)},color:m.red,addBreak:!0}],["newtask",{dispName:"New Task",materialIcon:"note_add",action:()=>{const r={windowTitle:"Create new Task",nodeTitle:"Content",hideTitleField:!1,hideContentField:!0,buttonText:"Create task",buttonAction:e=>{g.createTask(e),g.refreshAll()},clearFields:!0};T.show(r)},color:m.yellow,inTopBar:!0}],["clearalltasks",{dispName:"Clear All Tasks",materialIcon:"clear_all",action:()=>{const r={title:"Clear All Tasks",message:"Are you sure you want to clear all Tasks? There is no going back!",confirmButtonAction:()=>{u.toast({title:"",text:"Cleared all Tasks",delay:3e3}),localStorage.removeItem("taskstore"),g.refreshAll()},confirmButtonText:"Clear"};F.display(r)},color:m.red}],["finishalltasks",{dispName:"Complete All Tasks",materialIcon:"done_all",action:()=>{const r={title:"Complete All Tasks",message:"Are you sure you want to complete all Tasks?",confirmButtonAction:()=>{g.completeAll()},confirmButtonText:"OK"};F.display(r)},color:m.green,addBreak:!0}],["emptytrash",{dispName:"Empty Trash",materialIcon:"delete_sweep",action:()=>{const r={title:"Empty Trash",message:"Are you sure you want to empty the trash?",confirmButtonAction:()=>{u.toast({title:"",text:"Trash emptied",delay:3e3}),A.emptyTrash()},confirmButtonText:"Empty Trash"};F.display(r)},color:m.red,addBreak:!0}]]);class ce{populatePages(){const e=document.querySelector("div.sidebar>#pages"),t=document.querySelector("div.headerbar #pages");for(const n of b)if(n[1].onSidebar){const o=document.createElement("span"),s=document.createElement("button"),a=document.createElement("span");if(a.innerText=n[1].dispName,o.innerText=n[1].materialIcon,o.className="material-icons",s.className="page unselected option",s.id=`button-page-${n[0]}`,s.title=n[1].dispName,s.append(o),s.append(a),s.addEventListener("click",()=>E.switch(n[0],s)),s.addEventListener("mouseenter",()=>{o.style.color=`var(--${m[n[1].color]})`,a.style.color=`var(--${m[n[1].color]})`}),s.addEventListener("mouseleave",()=>{o.style.color="",a.style.color=""}),n[1].inTopBar?(a.style.display="none",t==null||t.append(s)):(e==null||e.append(s),n[1].addBreak&&(e==null||e.append(document.createElement("hr")))),n[1].hasCountableContent){const i=document.createElement("span");i.className="counter",i.innerText="0",s.append(i)}}this.trimHRs()}populateActions(){const e=document.querySelector("div.sidebar>div#actions"),t=document.querySelector("div.headerbar #actions");for(const n of ie){const o=document.createElement("span"),s=document.createElement("button"),a=document.createElement("span"),i=`${Math.floor(Math.random()*32768)}`;a.innerText=n[1].dispName,o.innerText=n[1].materialIcon,o.className="material-icons",o.id=i,s.className="action option",s.title=n[1].dispName,s.append(o),s.append(a),s.addEventListener("click",n[1].action),s.addEventListener("mouseenter",()=>{o.style.color=`var(--${m[n[1].color]})`,a.style.color=`var(--${m[n[1].color]})`}),s.addEventListener("mouseleave",()=>{o.style.color="",a.style.color=""}),n[1].inTopBar?(a.style.display="none",t==null||t.append(s)):(e==null||e.append(s),n[1].addBreak&&(e==null||e.append(document.createElement("hr"))))}this.trimHRs()}toggleSidebar(){(localStorage.getItem("sidebar-collapsed")||"false")=="true"?y.expandSidebar():y.collapseSidebar()}expandSidebar(){document.body.classList.remove("sidebar-collapsed"),localStorage.setItem("sidebar-collapsed","false")}collapseSidebar(){document.body.classList.add("sidebar-collapsed"),localStorage.setItem("sidebar-collapsed","true")}init(){this.syncSidebarState(),document.getElementById("sidebar-toggle").addEventListener("click",()=>{y.toggleSidebar(),y.syncSidebarState()})}syncSidebarState(){(localStorage.getItem("sidebar-collapsed")||"false")=="true"?y.collapseSidebar():y.expandSidebar()}trimHRs(){const e=document.querySelector("div.sidebar>#pages"),t=document.querySelector("div.sidebar>#actions");e.lastChild instanceof HTMLHRElement&&e.removeChild(e.lastChild),t.lastChild instanceof HTMLHRElement&&t.removeChild(t.lastChild)}}const y=new ce;class de{init(){const e=document.createElement("button"),t=document.createElement("span");e.className="action",e.id="sidebar-toggle",t.className="material-icons",t.innerText="more_vert",e.append(t),document.querySelectorAll("div.headerbar .header")[0].append(e)}}const ue=new de;class me{init(){console.warn=()=>{}}}const he=new me;w.registerLanguage("ts",G);w.registerLanguage("js",Y);w.highlightAll();Q.registerColorClasses();const U="home";ue.init();T.init();y.init();u.init();B.init();he.init();A.init();y.populateActions();y.populatePages();p.refreshAll();g.refreshAll();_.refreshAll(!0);E.switch(U,document.getElementById(`button-page-${U}`));le.populateHomeButtons();
